var background=function(){"use strict";var t,c;function i(o){return o==null||typeof o=="function"?{main:o}:o}const s=(c=(t=globalThis.browser)==null?void 0:t.runtime)!=null&&c.id?globalThis.browser:globalThis.chrome,u=i(()=>{s.webRequest.onCompleted.addListener(o=>{o.url.includes("/api/sns/web/v1/search/notes")&&chrome.tabs.sendMessage(o.tabId,{type:"INTERCEPT_RED_API",url:o.url})},{urls:["https://*.xiaohongshu.com/*"]}),s.runtime.onMessage.addListener(o=>{if(o.type==="NOTE_DETAILS"){const{noteLink:r}=o.data,l=r.split("?")[0].split("/")[4],d=r.split("?")[1];console.log("构造的参数",{source_note_id:l,image_formats:["jpg","webp","avif"],extra:{need_body_topic:"1"},xsec_source:"pc_feed",xsec_token:d})}}),console.log("Background script loaded1111")});function g(){}function e(o,...r){}const a={debug:(...o)=>e(console.debug,...o),log:(...o)=>e(console.log,...o),warn:(...o)=>e(console.warn,...o),error:(...o)=>e(console.error,...o)};let n;try{n=u.main(),n instanceof Promise&&console.warn("The background's main() function return a promise, but it must be synchronous")}catch(o){throw a.error("The background crashed on startup!"),o}return n}();
background;
